# Publicly accessible website (pubweb)

### Visible layout (sitemap-ish)

There is:
- `birds`, the bird selection, intended for use by politicians.  
  TODO: rename to something saner, like `birds`
- `about`, listing copyright credits and "the concept"
- TODO: `index`, the page that will host preview screenshots,
  some general information about where, when, and how this
  exhibition will take place.

Each page is available in both German and English.

### General composition

- `/pubweb/autogen/` holds the autogenerated HTML from the python scripts.
  Do not modify any of these files.
- `/pubweb/static/` holds all static files that will be copied verbatim to the destination.  
  See `static/favicons.README` for an explanation why there's so many files.
- `/pubweb/main.coffee` will be processed into the website's JavaScript.
- `/out_pubweb/` generated website.  Do not modify any of these files.

### Workflow

Just run `make pubweb`, and point your browser at `out_pubweb/birds.html`.

- In order to publish the webpage, push to
  `https://github.com/HouseOfTweets/HouseOfTweets.github.io`
- In order to test it out for yourself, *fork* the repository
  on GitHub, then you can see it "basically live" at
  `https://YOUR_GITHUB_NAME.github.io/HouseOfTweets.github.io/birds.html`,
  e.g., https://benwiederhake.github.io/HouseOfTweets.github.io/birds.html
- Protip: replace `out_pubweb/` by your actual repo:
  ```
  rm -rf out_pubweb/ && \
  git clone git@github.com:YOUR_GITHUB_NAME/HouseOfTweets.github.io.git out_pubweb && \
  cd out_pubweb/ && \
  git remote add real git@github.com:HouseOfTweets/HouseOfTweets.github.io.git
  ```
- But most the time, you don't need that.  Just point your browser
  at some HTML file in `out_pubweb/`, and it should work.

Note that it complains about not finding `/favicon-16x16.png` and `/favicon-32x32.png`
when testing.  This is normal, and won't happen in production.

### Weird decisions that need explanations

#### Why so much python?

Well, most of the things don't need execution in the browser.
And what only needs a single pass in Python might save a few milliseconds in the Browser.
Finally, I'm more familiar with Python, so I preferred writing stuff like copyright
aggregation in Python, rather than JavaScript.

#### Why not translate in real time in the browser?

Why should we do that?

It would speed up the laod times when clicking a language button, yes, but it would
slow down everything else.
Also, I kinda prefer it this way.
The less JS does, the less can go wrong.

#### The birds are generated by *both* Python and JS?

Yup.  Idea: for the first screenful of content, absolutely no loading is necessary,
and the browser can churn out requests for the images *immediately*, even before any
script is executed.

#### Twitter button rationale

A "real" Twitter button lives inside an iframe and loads lots of JS both inside
each iframe and once outside it.  In order to get that running with
dynamically-loaded content, one would need to use their
[Tweet Button JavaScript Factory Function](https://dev.twitter.com/web/tweet-button/javascript-create)
(I'm not making this one up!), and this is just insane.

It's a goddamn button, it shouldn't require any JavaScript at all,
and it shouldn't be so heavy.
That's why we do a lot of custom, but "direct" styling on our own,
in order to get a simple button thing that looks and feels the same.
