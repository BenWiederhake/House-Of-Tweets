/* dot -Tpng -o dataflow.png dataflow.dot */
digraph backend_dataflow {
    birdJson [label="birds.json",shape=box];
    birdBack [label="birdBackend"];
    birdJson -> birdBack;
    polJson [label="/backend/pols.json",shape=box];
    polBack [label="polBackend"];
    polJson -> polBack;
    coffJson [label="/coffee/model/model_polis.coffee", shape=box];
    polBack -> {polJson, coffJson} [label="onupdate"];
    queue [label="TweetQueue"];
    fe [label="Frontend", shape=circle, style=bold];
    queue -> fe;

    /* Main connection (pretty central, I'd say) */
    twi [label="TwitterConnection"];
    {polBack, birdBack} -> twi;
    twi -> queue;
    twi -> polBack [label="update"];
    
    c [label="CitizenQueue"];
    fe -> c;
    c -> twi;

    cbq [label="CitizenBird"];
    cbq -> polBack;
    fe -> cbq;
}
